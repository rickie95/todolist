version: "3.7"
services:
    jenkins:
        build: 
            context: ./
            dockerfile: ./docker-files/jenkins.dockerfile
        image: riccardomalavolti/jenkins-opjdk8-mvn363
        ports:
            - "8090:8080"
            - "2376:2376"
            - "50000:50000"
        env_file:
            - variables.env
        environment:
            DOCKER_SOCKET: /var/run/docker.sock
            DOCKER_GROUP: docker
            JENKINS_USER: jenkins
            DOCKER_HOST: unix://var/run/docker.sock
        volumes:
            - /var/run/docker.sock:/var/run/docker.sock

#    mongo:
#        image: mverts/alpine-mongo
#        networks:
#            - riccardo-network
            
networks:
    todolist-network:
        driver: bridge
