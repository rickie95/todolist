dist: trusty

language: java
jdk: openjdk8
install: true

cache:
  directories:
  - $HOME/.m2
  - $HOME/.sonar/cache
  

services:
  - docker

matrix:
  include:
    - if: type = push
      env: PROFILES="-Pjacoco"
    - if: type = cron
      env: PROFILES="-Pjacoco,mutation-testing"

before_install:
- sudo apt-get install -y tightvncserver
- sudo apt-get install -y expect
      
script:
- ./execute-on-vnc.sh mvn -f com.riccardomalavolti.apps.todolist/pom.xml clean verify $PROFILES jacoco:report coveralls:report sonar:sonar
