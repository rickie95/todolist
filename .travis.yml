language: java
jdk: openjdk8
install: true

cache:
  directories:
  - $HOME/.m2
  - $HOME/.sonar/cache
  
env: DISPLAY=99.0

services:
  - xvfb
  - docker

matrix:
  include:
    - if: type = push
      env: PROFILES="-Pjacoco"
    - if: type = cron
      env: PROFILES="-Pjacoco,mutation-testing"
      
script:
- mvn -f com.riccardomalavolti.apps.todolist/pom.xml clean verify $PROFILES jacoco:report coveralls:report sonar:sonar